function requestSWInfo(e,t){return new Promise(function(n,r){var o=new XMLHttpRequest;o.open(t,e,!0),o.send(),o.onreadystatechange=function(){if(4===o.readyState)if(200===o.status){var e=o.responseText,t=JSON.parse(e);n(t)}else r(o.status)}})}function errorHandler(e){console.log("failed with status",status)}function reflect(e){return e.then(function(e){return{resolved:e,status:"resolved"}},function(e){return{rejected:e,status:"rejected"}})}function getPlanetData(){function e(e){for(var r=1;r<=e;r++)currentPlanetURL=u+r,d.push(requestSWInfo(currentPlanetURL,"GET"));Promise.all(d.map(reflect)).then(function(e){t(e),n(),o()})}function t(e){var t=1;e.forEach(function(e){if(e.resolved){var n={id:t,name:e.resolved.name,terrain:e.resolved.terrain,population:e.resolved.population,diameter:e.resolved.diameter};e.resolved.residents.length?n.residents=e.resolved.residents.map(function(e){return e.replace(/[^0-9]/g,"")}):n.residents="unknown",planetDataLocal.push(n)}t++})}function n(){peopleDataLocal.forEach(function(e,t){a[t].innerHTML=r(e.planet),a[t].dataset.planet=e.planet})}function r(e){var t="";return planetDataLocal.forEach(function(n){n.id!==parseInt(e)||(t=n.name)}),t}function o(){i.classList.add("load-screen--fadeout"),c.classList.add("load-screen__img--moveout"),setTimeout(function(){l.classList.add("main--show")},1e3),setTimeout(function(){s.forEach(function(e){e.classList.add("people-list__item-wrapper--show-items")})},1200)}var a=document.querySelectorAll(".people-list__planet"),s=document.querySelectorAll(".people-list__item-wrapper"),l=document.querySelector(".main"),i=document.querySelector(".load-screen"),c=document.querySelector(".load-screen__img"),u="https://swapi.co/api/planets/",d=[];requestSWInfo(u,"GET").then(function(t){e(t.count)},errorHandler)}var peopleDataLocal=[],planetDataLocal=[],renderList=function(){function e(e){for(var t=1;t<e;t+=2){var n=s.cloneNode(!0);a.appendChild(n)}o=document.querySelectorAll(".people-list__name")}function t(e){for(var t=1;t<=e;t++)currentPersonURL=l+t,i.push(requestSWInfo(currentPersonURL,"GET"));Promise.all(i.map(reflect)).then(function(e){n(e),r(),getPlanetData()})}function n(e){var t=1;e.forEach(function(e){if(e.resolved){var n={id:t,name:e.resolved.name,height:e.resolved.height,weight:e.resolved.mass,birth_year:e.resolved.birth_year,gender:e.resolved.gender};e.resolved.homeworld?n.planet=e.resolved.homeworld.replace(/[^0-9]/g,""):n.planet="unknown",e.resolved.species[0]?n.species=e.resolved.species[0].replace(/[^0-9]/g,""):n.species="unknown",peopleDataLocal.push(n)}t++})}function r(){peopleDataLocal.forEach(function(e,t){o[t].dataset.name=e.id,o[t].innerHTML=e.name,o[t].parentElement.classList.add("people-list__item-wrapper--show")})}var o,a=document.querySelector(".people-list__grid"),s=document.querySelector(".people-list__item"),l="https://swapi.co/api/people/",i=[];requestSWInfo(l,"GET").then(function(n){var r=n.count;e(r),t(r)},errorHandler)}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJwbGFuZXQtbGlzdC5qcyIsInBlb3BsZS1saXN0LmpzIl0sIm5hbWVzIjpbInJlcXVlc3RTV0luZm8iLCJ1cmwiLCJtZXRob2RUeXBlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJ4aHIiLCJYTUxIdHRwUmVxdWVzdCIsIm9wZW4iLCJzZW5kIiwib25yZWFkeXN0YXRlY2hhbmdlIiwicmVhZHlTdGF0ZSIsInN0YXR1cyIsInJlc3AiLCJyZXNwb25zZVRleHQiLCJyZXNwSnNvbiIsIkpTT04iLCJwYXJzZSIsImVycm9ySGFuZGxlciIsInN0YXR1c0NvZGUiLCJjb25zb2xlIiwibG9nIiwicmVmbGVjdCIsInByb21pc2UiLCJ0aGVuIiwicmVzb2x2ZWQiLCJyZWplY3RlZCIsImdldFBsYW5ldERhdGEiLCJfcG9wdWxhdGVMaXN0IiwicGxhbmV0TnVtYmVyIiwiaSIsImN1cnJlbnRQbGFuZXRVUkwiLCJwbGFuZXRVUkwiLCJwcm9taXNlcyIsInB1c2giLCJhbGwiLCJtYXAiLCJwbGFuZXRzRGF0YSIsIl9zdG9yZVBsYW5ldERhdGEiLCJfcmVuZGVyUGxhbmV0SXRlbSIsIl9zdGFydEFuaW1hdGlvbiIsImlkIiwiZm9yRWFjaCIsInBsYW5ldERhdGEiLCJuZXdQbGFuZXQiLCJuYW1lIiwidGVycmFpbiIsInBvcHVsYXRpb24iLCJkaWFtZXRlciIsInJlc2lkZW50cyIsImxlbmd0aCIsInJlc2lkZW50VVJMIiwicmVwbGFjZSIsInBsYW5ldERhdGFMb2NhbCIsInBlb3BsZURhdGFMb2NhbCIsInBlcnNvbiIsImluZGV4IiwicGxhbmV0TmFtZSIsImlubmVySFRNTCIsIl9nZXRQZXJzb25QbGFuZXROYW1lIiwicGxhbmV0IiwiZGF0YXNldCIsInBsYW5ldElkIiwibXlQbGFuZXQiLCJwYXJzZUludCIsImxvYWRTY3JlZW4iLCJjbGFzc0xpc3QiLCJhZGQiLCJsb2FkR2lmIiwic2V0VGltZW91dCIsIm1haW4iLCJpdGVtV3JhcHBlciIsImVsZW1lbnQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJxdWVyeVNlbGVjdG9yIiwiZGF0YSIsImNvdW50IiwicmVuZGVyTGlzdCIsIl9idWlsZExpc3QiLCJwZW9wbGVOdW1iZXIiLCJwZW9wbGVMaUNsb25lIiwicGVvcGxlTGkiLCJjbG9uZU5vZGUiLCJwZW9wbGVHcmlkIiwiYXBwZW5kQ2hpbGQiLCJwZW9wbGVOYW1lIiwiY3VycmVudFBlcnNvblVSTCIsInBlb3BsZVVSTCIsInBlb3BsZURhdGEiLCJfc3RvcmVQZW9wbGVEYXRhIiwiX3JlbmRlclBlcnNvbkl0ZW0iLCJwZXJzb25EYXRhIiwibmV3UGVyc29uIiwiaGVpZ2h0Iiwid2VpZ2h0IiwibWFzcyIsImJpcnRoX3llYXIiLCJnZW5kZXIiLCJob21ld29ybGQiLCJzcGVjaWVzIiwicGFyZW50RWxlbWVudCJdLCJtYXBwaW5ncyI6IkFBQUEsU0FBQUEsY0FBQUMsRUFBQUMsR0FvQkEsT0FuQkEsSUFBQUMsUUFBQSxTQUFBQyxFQUFBQyxHQUNBLElBQUFDLEVBQUEsSUFBQUMsZUFDQUQsRUFBQUUsS0FBQU4sRUFBQUQsR0FBQSxHQUNBSyxFQUFBRyxPQUNBSCxFQUFBSSxtQkFBQSxXQUNBLEdBQUEsSUFBQUosRUFBQUssV0FDQSxHQUFBLE1BQUFMLEVBQUFNLE9BQUEsQ0FDQSxJQUFBQyxFQUFBUCxFQUFBUSxhQUNBQyxFQUFBQyxLQUFBQyxNQUFBSixHQUNBVCxFQUFBVyxRQUVBVixFQUFBQyxFQUFBTSxXQVdBLFNBQUFNLGFBQUFDLEdBQ0FDLFFBQUFDLElBQUEscUJBQUFULFFBR0EsU0FBQVUsUUFBQUMsR0FDQSxPQUFBQSxFQUFBQyxLQUFBLFNBQUFDLEdBQUEsT0FBQUEsU0FBQUEsRUFBQWIsT0FBQSxhQUNBLFNBQUFjLEdBQUEsT0FBQUEsU0FBQUEsRUFBQWQsT0FBQSxjQzdCQSxTQUFBZSxnQkFnQkEsU0FBQUMsRUFBQUMsR0FDQSxJQUFBLElBQUFDLEVBQUEsRUFBQUEsR0FBQUQsRUFBQUMsSUFDQUMsaUJBQUFDLEVB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QUFBUixFQUFBbkUsU0FBQTJFLFFBQUEsR0FBQWhELFFBQUEsVUFBQSxJQUNBeUMsRUFBQU8sUUFBQSxVQUVBOUMsZ0JBQUFwQixLQUFBMkQsR0FFQXBELE1BSUEsU0FBQWtELElBQ0FyQyxnQkFBQVosUUFBQSxTQUFBYSxFQUFBQyxHQUNBOEIsRUFBQTlCLEdBQUFLLFFBQUFoQixLQUFBVSxFQUFBZCxHQUNBNkMsRUFBQTlCLEdBQUFFLFVBQUFILEVBQUFWLEtBQ0F5QyxFQUFBOUIsR0FBQTZDLGNBQUFuQyxVQUFBQyxJQUFBLHFDQWpFQSxJQUVBbUIsRUFGQUYsRUFBQVgsU0FBQUUsY0FBQSxzQkFDQU8sRUFBQVQsU0FBQUUsY0FBQSxzQkFHQWEsRUFBQSwrQkFDQXZELEtBRUFqQyxjQUFBd0YsRUFBQSxPQUFBaEUsS0FFQSxTQUFBb0QsR0FDQSxJQUFBSSxFQUFBSixFQUFBQyxNQUNBRSxFQUFBQyxHQUNBcEQsRUFBQW9ELElBTEE5RCxjQVJBIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIHJlcXVlc3RTV0luZm8odXJsLCBtZXRob2RUeXBlKXtcbiAgdmFyIHByb21pc2VPYmogPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xuICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICB4aHIub3BlbihtZXRob2RUeXBlLCB1cmwsIHRydWUpO1xuICAgIHhoci5zZW5kKCk7XG4gICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCl7XG4gICAgICBpZih4aHIucmVhZHlTdGF0ZSA9PT0gNCl7XG4gICAgICAgICBpZih4aHIuc3RhdHVzID09PSAyMDApe1xuICAgICAgICAgIHZhciByZXNwID0geGhyLnJlc3BvbnNlVGV4dDtcbiAgICAgICAgICAgIHZhciByZXNwSnNvbiA9IEpTT04ucGFyc2UocmVzcCk7XG4gICAgICAgICAgICByZXNvbHZlKHJlc3BKc29uKTtcbiAgICAgICAgIH0gZWxzZXtcbiAgICAgICAgICAgIHJlamVjdCh4aHIuc3RhdHVzKTtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwieGhyIGZhaWxlZFwiKTsgLy8gVE9ETzogYXBwZW5kICdjYW50IGZpbmQnIG1zZ1xuICAgICAgICAgICB9XG4gICAgICB9IGVsc2V7XG4gICAgICAgICAvLyBjb25zb2xlLmxvZyhcInhociBwcm9jZXNzaW5nIGdvaW5nIG9uXCIpOyAvLyBUT0RPOiBhZGQgbG9hZGluZyBhbmltYXRpb25cbiAgICAgICAgIH1cbiAgICB9O1xuICB9KTtcbiAgcmV0dXJuIHByb21pc2VPYmo7XG59XG5cbmZ1bmN0aW9uIGVycm9ySGFuZGxlcihzdGF0dXNDb2RlKXtcbiAgY29uc29sZS5sb2coXCJmYWlsZWQgd2l0aCBzdGF0dXNcIiwgc3RhdHVzKTtcbn1cblxuZnVuY3Rpb24gcmVmbGVjdChwcm9taXNlKXtcbiAgcmV0dXJuIHByb21pc2UudGhlbihmdW5jdGlvbihyZXNvbHZlZCl7IHJldHVybiB7cmVzb2x2ZWQ6cmVzb2x2ZWQsIHN0YXR1czogXCJyZXNvbHZlZFwiIH07fSxcbiAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihyZWplY3RlZCl7IHJldHVybiB7cmVqZWN0ZWQ6cmVqZWN0ZWQsIHN0YXR1czogXCJyZWplY3RlZFwiIH07fSk7XG59XG5cbnZhciBwZW9wbGVEYXRhTG9jYWwgPSBbXTtcbnZhciBwbGFuZXREYXRhTG9jYWwgPSBbXTtcbiIsImZ1bmN0aW9uIGdldFBsYW5ldERhdGEoKXtcbiAgdmFyIHBsYW5ldE5hbWUgID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnBlb3BsZS1saXN0X19wbGFuZXQnKTtcbiAgdmFyIGl0ZW1XcmFwcGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnBlb3BsZS1saXN0X19pdGVtLXdyYXBwZXInKTtcbiAgdmFyIG1haW4gICAgICAgID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1haW4nKTtcbiAgdmFyIGxvYWRTY3JlZW4gID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmxvYWQtc2NyZWVuJyk7XG4gIHZhciBsb2FkR2lmICAgICA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5sb2FkLXNjcmVlbl9faW1nJyk7XG4gIHZhciBwbGFuZXRVUkwgICA9ICdodHRwczovL3N3YXBpLmNvL2FwaS9wbGFuZXRzLyc7XG4gIHZhciBwcm9taXNlcyAgICA9IFtdO1xuXG4gIHJlcXVlc3RTV0luZm8ocGxhbmV0VVJMLCBcIkdFVFwiKS50aGVuKF9zdGFydExpc3QsIGVycm9ySGFuZGxlcik7XG5cbiAgZnVuY3Rpb24gX3N0YXJ0TGlzdChkYXRhKSB7XG4gICAgdmFyIHBsYW5ldE51bWJlciA9IGRhdGEuY291bnQ7XG4gICAgX3BvcHVsYXRlTGlzdChwbGFuZXROdW1iZXIpO1xuICB9XG5cbiAgZnVuY3Rpb24gX3BvcHVsYXRlTGlzdChwbGFuZXROdW1iZXIpIHtcbiAgICBmb3IgKHZhciBpID0gMTsgaSA8PSBwbGFuZXROdW1iZXI7IGkrKykge1xuICAgICAgY3VycmVudFBsYW5ldFVSTCA9IHBsYW5ldFVSTCArIGk7XG4gICAgICBwcm9taXNlcy5wdXNoKHJlcXVlc3RTV0luZm8oY3VycmVudFBsYW5ldFVSTCwgXCJHRVRcIikpO1xuICAgIH1cbiAgICBQcm9taXNlLmFsbChwcm9taXNlcy5tYXAocmVmbGVjdCkpLnRoZW4oZnVuY3Rpb24ocGxhbmV0c0RhdGEpe1xuICAgICAgX3N0b3JlUGxhbmV0RGF0YShwbGFuZXRzRGF0YSk7XG4gICAgICBfcmVuZGVyUGxhbmV0SXRlbSgpO1xuICAgICAgX3N0YXJ0QW5pbWF0aW9uKCk7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBfc3RvcmVQbGFuZXREYXRhKHBsYW5ldHNEYXRhKSB7XG4gICAgdmFyIGlkID0gMTtcbiAgICBwbGFuZXRzRGF0YS5mb3JFYWNoKGZ1bmN0aW9uKHBsYW5ldERhdGEpIHtcbiAgICAgIGlmIChwbGFuZXREYXRhLnJlc29sdmVkKSB7XG4gICAgICAgIHZhciBuZXdQbGFuZXQgPSB7XG4gICAgICAgICAgaWQ6IGlkLFxuICAgICAgICAgIG5hbWU6IHBsYW5ldERhdGEucmVzb2x2ZWQubmFtZSxcbiAgICAgICAgICB0ZXJyYWluOiBwbGFuZXREYXRhLnJlc29sdmVkLnRlcnJhaW4sXG4gICAgICAgICAgcG9wdWxhdGlvbjogcGxhbmV0RGF0YS5yZXNvbHZlZC5wb3B1bGF0aW9uLFxuICAgICAgICAgIGRpYW1ldGVyOiBwbGFuZXREYXRhLnJlc29sdmVkLmRpYW1ldGVyXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKHBsYW5ldERhdGEucmVzb2x2ZWQucmVzaWRlbnRzLmxlbmd0aCkge1xuICAgICAgICAgIG5ld1BsYW5ldC5yZXNpZGVudHMgPSBwbGFuZXREYXRhLnJlc29sdmVkLnJlc2lkZW50cy5tYXAoZnVuY3Rpb24ocmVzaWRlbnRVUkwpIHtcbiAgICAgICAgICAgIHJldHVybiByZXNpZGVudFVSTC5yZXBsYWNlKC9bXjAtOV0vZywnJyk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmV3UGxhbmV0LnJlc2lkZW50cyA9IFwidW5rbm93blwiO1xuICAgICAgICB9XG4gICAgICAgIHBsYW5ldERhdGFMb2NhbC5wdXNoKG5ld1BsYW5ldCk7XG4gICAgICB9XG4gICAgICBpZCsrO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gX3JlbmRlclBsYW5ldEl0ZW0oKSB7XG4gICAgcGVvcGxlRGF0YUxvY2FsLmZvckVhY2goIGZ1bmN0aW9uKHBlcnNvbiwgaW5kZXgpIHtcbiAgICAgIHBsYW5ldE5hbWVbaW5kZXhdLmlubmVySFRNTCA9IF9nZXRQZXJzb25QbGFuZXROYW1lKHBlcnNvbi5wbGFuZXQpO1xuICAgICAgcGxhbmV0TmFtZVtpbmRleF0uZGF0YXNldC5wbGFuZXQgPSBwZXJzb24ucGxhbmV0O1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gX2dldFBlcnNvblBsYW5ldE5hbWUocGxhbmV0SWQpIHtcbiAgICB2YXIgbXlQbGFuZXQgPSAnJztcbiAgICBwbGFuZXREYXRhTG9jYWwuZm9yRWFjaChmdW5jdGlvbihwbGFuZXQpIHtcbiAgICAgIGlmIChwbGFuZXQuaWQgPT09IHBhcnNlSW50KHBsYW5ldElkKSkge1xuICAgICAgICBteVBsYW5ldCA9IHBsYW5ldC5uYW1lO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIG15UGxhbmV0O1xuICB9XG5cbiAgZnVuY3Rpb24gX3N0YXJ0QW5pbWF0aW9uKCkge1xuICAgIGxvYWRTY3JlZW4uY2xhc3NMaXN0LmFkZCgnbG9hZC1zY3JlZW4tLWZhZGVvdXQnKTtcbiAgICBsb2FkR2lmLmNsYXNzTGlzdC5hZGQoJ2xvYWQtc2NyZWVuX19pbWctLW1vdmVvdXQnKTtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgbWFpbi5jbGFzc0xpc3QuYWRkKCdtYWluLS1zaG93Jyk7XG4gICAgfSwgMTAwMCk7XG4gICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgaXRlbVdyYXBwZXIuZm9yRWFjaCggZnVuY3Rpb24oZWxlbWVudCkge1xuICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3Blb3BsZS1saXN0X19pdGVtLXdyYXBwZXItLXNob3ctaXRlbXMnKTtcbiAgICAgIH0pO1xuICAgIH0sIDEyMDApO1xuICB9XG59XG4iLCJ2YXIgcmVuZGVyTGlzdCA9IChmdW5jdGlvbigpIHtcbiAgdmFyIHBlb3BsZUdyaWQgICAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGVvcGxlLWxpc3RfX2dyaWQnKTtcbiAgdmFyIHBlb3BsZUxpICAgICAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGVvcGxlLWxpc3RfX2l0ZW0nKTtcbiAgdmFyIHBlb3BsZU5hbWU7XG5cbiAgdmFyIHBlb3BsZVVSTCA9ICdodHRwczovL3N3YXBpLmNvL2FwaS9wZW9wbGUvJztcbiAgdmFyIHByb21pc2VzID0gW107XG5cbiAgcmVxdWVzdFNXSW5mbyhwZW9wbGVVUkwsIFwiR0VUXCIpLnRoZW4oX3N0YXJ0TGlzdCwgZXJyb3JIYW5kbGVyKTtcblxuICBmdW5jdGlvbiBfc3RhcnRMaXN0KGRhdGEpIHtcbiAgICB2YXIgcGVvcGxlTnVtYmVyID0gZGF0YS5jb3VudDtcbiAgICBfYnVpbGRMaXN0KHBlb3BsZU51bWJlcik7XG4gICAgX3BvcHVsYXRlTGlzdChwZW9wbGVOdW1iZXIpO1xuICB9XG5cbiAgZnVuY3Rpb24gX2J1aWxkTGlzdChwZW9wbGVOdW1iZXIpIHtcbiAgICBmb3IgKHZhciBpID0gMTsgaSA8IHBlb3BsZU51bWJlcjsgaSs9Mikge1xuICAgICAgdmFyIHBlb3BsZUxpQ2xvbmUgPSBwZW9wbGVMaS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgICBwZW9wbGVHcmlkLmFwcGVuZENoaWxkKHBlb3BsZUxpQ2xvbmUpO1xuICAgIH1cbiAgICBwZW9wbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnBlb3BsZS1saXN0X19uYW1lJyk7XG4gIH1cblxuICBmdW5jdGlvbiBfcG9wdWxhdGVMaXN0KHBlb3BsZU51bWJlcikge1xuICAgIGZvciAodmFyIGkgPSAxOyBpIDw9IHBlb3BsZU51bWJlcjsgaSsrKSB7XG4gICAgICBjdXJyZW50UGVyc29uVVJMID0gcGVvcGxlVVJMICsgaTtcbiAgICAgIHByb21pc2VzLnB1c2gocmVxdWVzdFNXSW5mbyhjdXJyZW50UGVyc29uVVJMLCBcIkdFVFwiKSk7XG4gICAgfVxuICAgIFByb21pc2UuYWxsKHByb21pc2VzLm1hcChyZWZsZWN0KSkudGhlbihmdW5jdGlvbihwZW9wbGVEYXRhKXtcbiAgICAgIF9zdG9yZVBlb3BsZURhdGEocGVvcGxlRGF0YSk7XG4gICAgICBfcmVuZGVyUGVyc29uSXRlbSgpO1xuICAgICAgZ2V0UGxhbmV0RGF0YSgpO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gX3N0b3JlUGVvcGxlRGF0YShwZW9wbGVEYXRhKSB7XG4gICAgdmFyIGlkID0gMTtcbiAgICBwZW9wbGVEYXRhLmZvckVhY2goZnVuY3Rpb24ocGVyc29uRGF0YSkge1xuICAgICAgaWYgKHBlcnNvbkRhdGEucmVzb2x2ZWQpIHtcbiAgICAgICAgdmFyIG5ld1BlcnNvbiA9IHtcbiAgICAgICAgICBpZDogaWQsXG4gICAgICAgICAgbmFtZTogcGVyc29uRGF0YS5yZXNvbHZlZC5uYW1lLFxuICAgICAgICAgIGhlaWdodDogcGVyc29uRGF0YS5yZXNvbHZlZC5oZWlnaHQsXG4gICAgICAgICAgd2VpZ2h0OiBwZXJzb25EYXRhLnJlc29sdmVkLm1hc3MsXG4gICAgICAgICAgYmlydGhfeWVhcjogcGVyc29uRGF0YS5yZXNvbHZlZC5iaXJ0aF95ZWFyLFxuICAgICAgICAgIGdlbmRlcjogcGVyc29uRGF0YS5yZXNvbHZlZC5nZW5kZXJcbiAgICAgICAgfTtcbiAgICAgICAgcGVyc29uRGF0YS5yZXNvbHZlZC5ob21ld29ybGQgP1xuICAgICAgICBuZXdQZXJzb24ucGxhbmV0ID0gcGVyc29uRGF0YS5yZXNvbHZlZC5ob21ld29ybGQucmVwbGFjZSgvW14wLTldL2csJycpIDpcbiAgICAgICAgbmV3UGVyc29uLnBsYW5ldCA9IFwidW5rbm93blwiO1xuXG4gICAgICAgIHBlcnNvbkRhdGEucmVzb2x2ZWQuc3BlY2llc1swXSA/XG4gICAgICAgIG5ld1BlcnNvbi5zcGVjaWVzID0gcGVyc29uRGF0YS5yZXNvbHZlZC5zcGVjaWVzWzBdLnJlcGxhY2UoL1teMC05XS9nLCcnKSA6XG4gICAgICAgIG5ld1BlcnNvbi5zcGVjaWVzID0gXCJ1bmtub3duXCI7XG5cbiAgICAgICAgcGVvcGxlRGF0YUxvY2FsLnB1c2gobmV3UGVyc29uKTtcbiAgICAgIH1cbiAgICAgIGlkKys7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBfcmVuZGVyUGVyc29uSXRlbSgpIHtcbiAgICBwZW9wbGVEYXRhTG9jYWwuZm9yRWFjaCggZnVuY3Rpb24ocGVyc29uLCBpbmRleCkge1xuICAgICAgcGVvcGxlTmFtZVtpbmRleF0uZGF0YXNldC5uYW1lID0gcGVyc29uLmlkO1xuICAgICAgcGVvcGxlTmFtZVtpbmRleF0uaW5uZXJIVE1MID0gcGVyc29uLm5hbWU7XG4gICAgICBwZW9wbGVOYW1lW2luZGV4XS5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3Blb3BsZS1saXN0X19pdGVtLXdyYXBwZXItLXNob3cnKTtcbiAgICB9KTtcbiAgfVxufSkoKTtcbiJdfQ==
