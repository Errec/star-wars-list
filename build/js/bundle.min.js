function requestSWInfo(e,n){return new Promise(function(t,r){var o=new XMLHttpRequest;o.open(n,e,!0),o.send(),o.onreadystatechange=function(){if(4===o.readyState)if(200===o.status){var e=o.responseText,n=JSON.parse(e);t(n)}else r(o.status)}})}function errorHandler(e){console.log("failed with status",status)}function reflect(e){return e.then(function(e){return{resolved:e,status:"resolved"}},function(e){return{rejected:e,status:"rejected"}})}function getPlanetData(){function e(e){for(var r=1;r<=e;r++)currentPlanetURL=a+r,l.push(requestSWInfo(currentPlanetURL,"GET"));Promise.all(l.map(reflect)).then(function(e){n(e),t()})}function n(e){var n=1;e.forEach(function(e){if(e.resolved){var t={id:n,name:e.resolved.name,terrain:e.resolved.terrain,population:e.resolved.population,diameter:e.resolved.diameter};e.resolved.residents.length?t.residents=e.resolved.residents.map(function(e){return e.replace(/[^0-9]/g,"")}):t.residents="unknown",planetDataLocal.push(t)}n++})}function t(){peopleDataLocal.forEach(function(e,n){o[n].innerHTML=r(e.planet)})}function r(e){var n="";return planetDataLocal.forEach(function(t){t.id!==parseInt(e)||(n=t.name)}),n}var o=document.querySelectorAll(".people-list__planet"),a="https://swapi.co/api/planets/",l=[];requestSWInfo(a,"GET").then(function(n){e(n.count)},errorHandler)}var peopleDataLocal=[],planetDataLocal=[],renderList=function(){function e(e){for(var n=1;n<e;n+=2){var t=l.cloneNode(!0);a.appendChild(t)}o=document.querySelectorAll(".people-list__name")}function n(e){for(var n=1;n<=e;n++)currentPersonURL=s+n,i.push(requestSWInfo(currentPersonURL,"GET"));Promise.all(i.map(reflect)).then(function(e){t(e),r(),getPlanetData()})}function t(e){var n=1;e.forEach(function(e){if(e.resolved){var t={id:n,name:e.resolved.name,height:e.resolved.height,weight:e.resolved.mass,birth_year:e.resolved.birth_year,gender:e.resolved.gender};e.resolved.homeworld?t.planet=e.resolved.homeworld.replace(/[^0-9]/g,""):t.planet="unknown",e.resolved.species[0]?t.species=e.resolved.species[0].replace(/[^0-9]/g,""):t.species="unknown",peopleDataLocal.push(t)}n++})}function r(){peopleDataLocal.forEach(function(e,n){o[n].innerHTML=e.name})}var o,a=document.querySelector(".people-list__grid"),l=document.querySelector(".people-list__item"),s="https://swapi.co/api/people/",i=[];requestSWInfo(s,"GET").then(function(t){var r=t.count;e(r),n(r)},errorHandler)}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJwbGFuZXQtbGlzdC5qcyIsInBlb3BsZS1saXN0LmpzIl0sIm5hbWVzIjpbInJlcXVlc3RTV0luZm8iLCJ1cmwiLCJtZXRob2RUeXBlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJ4aHIiLCJYTUxIdHRwUmVxdWVzdCIsIm9wZW4iLCJzZW5kIiwib25yZWFkeXN0YXRlY2hhbmdlIiwicmVhZHlTdGF0ZSIsInN0YXR1cyIsInJlc3AiLCJyZXNwb25zZVRleHQiLCJyZXNwSnNvbiIsIkpTT04iLCJwYXJzZSIsImVycm9ySGFuZGxlciIsInN0YXR1c0NvZGUiLCJjb25zb2xlIiwibG9nIiwicmVmbGVjdCIsInByb21pc2UiLCJ0aGVuIiwicmVzb2x2ZWQiLCJyZWplY3RlZCIsImdldFBsYW5ldERhdGEiLCJfcG9wdWxhdGVMaXN0IiwicGxhbmV0TnVtYmVyIiwiaSIsImN1cnJlbnRQbGFuZXRVUkwiLCJwbGFuZXRVUkwiLCJwcm9taXNlcyIsInB1c2giLCJhbGwiLCJtYXAiLCJwbGFuZXRzRGF0YSIsIl9zdG9yZVBsYW5ldERhdGEiLCJfcmVuZGVyUGxhbmV0SXRlbSIsImlkIiwiZm9yRWFjaCIsInBsYW5ldERhdGEiLCJuZXdQbGFuZXQiLCJuYW1lIiwidGVycmFpbiIsInBvcHVsYXRpb24iLCJkaWFtZXRlciIsInJlc2lkZW50cyIsImxlbmd0aCIsInJlc2lkZW50VVJMIiwicmVwbGFjZSIsInBsYW5ldERhdGFMb2NhbCIsInBlb3BsZURhdGFMb2NhbCIsInBlcnNvbiIsImluZGV4IiwicGxhbmV0TmFtZSIsImlubmVySFRNTCIsIl9nZXRQZXJzb25QbGFuZXROYW1lIiwicGxhbmV0IiwicGxhbmV0SWQiLCJteVBsYW5ldCIsInBhcnNlSW50IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZGF0YSIsImNvdW50IiwicmVuZGVyTGlzdCIsIl9idWlsZExpc3QiLCJwZW9wbGVOdW1iZXIiLCJwZW9wbGVMaUNsb25lIiwicGVvcGxlTGkiLCJjbG9uZU5vZGUiLCJwZW9wbGVHcmlkIiwiYXBwZW5kQ2hpbGQiLCJwZW9wbGVOYW1lIiwiY3VycmVudFBlcnNvblVSTCIsInBlb3BsZVVSTCIsInBlb3BsZURhdGEiLCJfc3RvcmVQZW9wbGVEYXRhIiwiX3JlbmRlclBlcnNvbkl0ZW0iLCJwZXJzb25EYXRhIiwibmV3UGVyc29uIiwiaGVpZ2h0Iiwid2VpZ2h0IiwibWFzcyIsImJpcnRoX3llYXIiLCJnZW5kZXIiLCJob21ld29ybGQiLCJzcGVjaWVzIiwicXVlcnlTZWxlY3RvciJdLCJtYXBwaW5ncyI6IkFBQUEsU0FBQUEsY0FBQUMsRUFBQUMsR0FvQkEsT0FuQkEsSUFBQUMsUUFBQSxTQUFBQyxFQUFBQyxHQUNBLElBQUFDLEVBQUEsSUFBQUMsZUFDQUQsRUFBQUUsS0FBQU4sRUFBQUQsR0FBQSxHQUNBSyxFQUFBRyxPQUNBSCxFQUFBSSxtQkFBQSxXQUNBLEdBQUEsSUFBQUosRUFBQUssV0FDQSxHQUFBLE1BQUFMLEVBQUFNLE9BQUEsQ0FDQSxJQUFBQyxFQUFBUCxFQUFBUSxhQUNBQyxFQUFBQyxLQUFBQyxNQUFBSixHQUNBVCxFQUFBVyxRQUVBVixFQUFBQyxFQUFBTSxXQVdBLFNBQUFNLGFBQUFDLEdBQ0FDLFFBQUFDLElBQUEscUJBQUFULFFBR0EsU0FBQVUsUUFBQUMsR0FDQSxPQUFBQSxFQUFBQyxLQUFBLFNBQUFDLEdBQUEsT0FBQUEsU0FBQUEsRUFBQWIsT0FBQSxhQUNBLFNBQUFjLEdBQUEsT0FBQUEsU0FBQUEsRUFBQWQsT0FBQSxjQzdCQSxTQUFBZSxnQkFZQSxTQUFBQyxFQUFBQyxHQUNBLElBQUEsSUFBQUMsRUFBQSxFQUFBQSxHQUFBRCxFQUFBQyxJQUNBQyxpQkFBQUMsRUFBQUYsRUFDQUcsRUFBQUMsS0FBQWxDLGNBQUErQixpQkFBQSxRQUVBNUIsUUFBQWdDLElBQUFGLEVBQUFHLElBQUFkLFVBQUFFLEtBQUEsU0FBQWEsR0FDQUMsRUFBQUQsR0FDQUUsTUFJQSxTQUFBRCxFQUFBRCxHQUNBLElBQUFHLEVBQUEsRUFDQUgsRUFBQUksUUFBQSxTQUFBQyxHQUNBLEdBQUFBLEVBQUFqQixTQUFBLENBQ0EsSUFBQWtCLEdBQ0FILEdBQUFBLEVBQ0FJLEtBQUFGLEVBQUFqQixTQUFBbUIsS0FDQUMsUUFBQUgsRUFBQWpCLFNBQUFvQixRQUNBQyxXQUFBSixFQUFBakIsU0FBQXFCLFdBQ0FDLFNBQUFMLEVBQUFqQixTQUFBc0IsVUFHQUwsRUFBQWpCLFNBQUF1QixVQUFBQyxPQUNBTixFQUFBSyxVQUFBTixFQUFBakIsU0FBQXVCLFVBQUFaLElBQUEsU0FBQWMsR0FDQSxPQUFBQSxFQUFBQyxRQUFBLFVBQUEsTUFHQVIsRUFBQUssVUFBQSxVQUVBSSxnQkFBQWxCLEtBQUFTLEdBRUFILE1BSUEsU0FBQUQsSUFDQWMsZ0JBQUFaLFFBQUEsU0FBQWEsRUFBQUMsR0FDQUMsRUFBQUQsR0FBQUUsVUFBQUMsRUFBQUosRUFBQUssVUFJQSxTQUFBRCxFQUFBRSxHQUNBLElBQUFDLEVBQUEsR0FPQSxPQU5BVCxnQkFBQVgsUUFBQSxTQUFBa0IsR0FDQUEsRUFBQW5CLEtBQUFzQixTQUFBRixLQUNBQyxFQUFBRixFQUFBZixRQUlBaUIsRUE3REEsSUFBQUwsRUFBQU8sU0FBQUMsaUJBQUEsd0JBQ0FoQyxFQUFBLGdDQUNBQyxLQUVBakMsY0FBQWdDLEVBQUEsT0FBQVIsS0FFQSxTQUFBeUMsR0FFQXJDLEVBREFxQyxFQUFBQyxRQUhBaEQsY0QyQkEsSUFBQW1DLG1CQUNBRCxtQkVqQ0FlLFdBQUEsV0FnQkEsU0FBQUMsRUFBQUMsR0FDQSxJQUFBLElBQUF2QyxFQUFBLEVBQUFBLEVBQUF1QyxFQUFBdkMsR0FBQSxFQUFBLENBQ0EsSUFBQXdDLEVBQUFDLEVBQUFDLFdBQUEsR0FDQUMsRUFBQUMsWUFBQUosR0FFQUssRUFBQVosU0FBQUMsaUJBQUEsc0JBR0EsU0FBQXBDLEVBQUF5QyxHQUNBLElBQUEsSUFBQXZDLEVBQUEsRUFBQUEsR0FBQXVDLEVBQUF2QyxJQUNBOEMsaUJBQUFDLEVBQUEvQyxFQUNBRyxFQUFBQyxLQUFBbEMsY0FBQTRFLGlCQUFBLFFBRUF6RSxRQUFBZ0MsSUFBQUYsRUFBQUcsSUFBQWQsVUFBQUUsS0FBQSxTQUFBc0QsR0FDQUMsRUFBQUQsR0FDQUUsSUFDQXJELGtCQUlBLFNBQUFvRCxFQUFBRCxHQUNBLElBQUF0QyxFQUFBLEVBQ0FzQyxFQUFBckMsUUFBQSxTQUFBd0MsR0FDQSxHQUFBQSxFQUFBeEQsU0FBQSxDQUNBLElBQUF5RCxHQUNBMUMsR0FBQUEsRUFDQUksS0FBQXFDLEVBQUF4RCxTQUFBbUIsS0FDQXVDLE9BQUFGLEVBQUF4RCxTQUFBMEQsT0FDQUMsT0FBQUgsRUFBQXhELFNBQUE0RCxLQUNBQyxXQUFBTCxFQUFBeEQsU0FBQTZELFdBQ0FDLE9BQUFOLEVBQUF4RCxTQUFBOEQsUUFFQU4sRUFBQXhELFNBQUErRCxVQUNBTixFQUFBdkIsT0FBQXNCLEVBQUF4RCxTQUFBK0QsVUFBQXJDLFFBQUEsVUFBQSxJQUNBK0IsRUFBQXZCLE9BQUEsVUFFQXNCLEVBQUF4RCxTQUFBZ0UsUUFBQSxHQUNBUCxFQUFBTyxRQUFBUixFQUFBeEQsU0FBQWdFLFFBQUEsR0FBQXRDLFFBQUEsVUFBQSxJQUNBK0IsRUFBQU8sUUFBQSxVQUVBcEMsZ0JBQUFuQixLQUFBZ0QsR0FFQTFDLE1BSUEsU0FBQXdDLElBQ0EzQixnQkFBQVosUUFBQSxTQUFBYSxFQUFBQyxHQUNBb0IsRUFBQXBCLEdBQUFFLFVBQUFILEVBQUFWLE9BL0RBLElBRUErQixFQUZBRixFQUFBVixTQUFBMkIsY0FBQSxzQkFDQW5CLEVBQUFSLFNBQUEyQixjQUFBLHNCQUdBYixFQUFBLCtCQUNBNUMsS0FFQWpDLGNBQUE2RSxFQUFBLE9BQUFyRCxLQUVBLFNBQUF5QyxHQUNBLElBQUFJLEVBQUFKLEVBQUFDLE1BQ0FFLEVBQUFDLEdBQ0F6QyxFQUFBeUMsSUFMQW5ELGNBUkEiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gcmVxdWVzdFNXSW5mbyh1cmwsIG1ldGhvZFR5cGUpe1xuICB2YXIgcHJvbWlzZU9iaiA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XG4gICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgIHhoci5vcGVuKG1ldGhvZFR5cGUsIHVybCwgdHJ1ZSk7XG4gICAgeGhyLnNlbmQoKTtcbiAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKXtcbiAgICAgIGlmKHhoci5yZWFkeVN0YXRlID09PSA0KXtcbiAgICAgICAgIGlmKHhoci5zdGF0dXMgPT09IDIwMCl7XG4gICAgICAgICAgdmFyIHJlc3AgPSB4aHIucmVzcG9uc2VUZXh0O1xuICAgICAgICAgICAgdmFyIHJlc3BKc29uID0gSlNPTi5wYXJzZShyZXNwKTtcbiAgICAgICAgICAgIHJlc29sdmUocmVzcEpzb24pO1xuICAgICAgICAgfSBlbHNle1xuICAgICAgICAgICAgcmVqZWN0KHhoci5zdGF0dXMpO1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJ4aHIgZmFpbGVkXCIpOyAvLyBUT0RPOiBhcHBlbmQgJ2NhbnQgZmluZCcgbXNnXG4gICAgICAgICAgIH1cbiAgICAgIH0gZWxzZXtcbiAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwieGhyIHByb2Nlc3NpbmcgZ29pbmcgb25cIik7IC8vIFRPRE86IGFkZCBsb2FkaW5nIGFuaW1hdGlvblxuICAgICAgICAgfVxuICAgIH07XG4gIH0pO1xuICByZXR1cm4gcHJvbWlzZU9iajtcbn1cblxuZnVuY3Rpb24gZXJyb3JIYW5kbGVyKHN0YXR1c0NvZGUpe1xuICBjb25zb2xlLmxvZyhcImZhaWxlZCB3aXRoIHN0YXR1c1wiLCBzdGF0dXMpO1xufVxuXG5mdW5jdGlvbiByZWZsZWN0KHByb21pc2Upe1xuICByZXR1cm4gcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHJlc29sdmVkKXsgcmV0dXJuIHtyZXNvbHZlZDpyZXNvbHZlZCwgc3RhdHVzOiBcInJlc29sdmVkXCIgfTt9LFxuICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHJlamVjdGVkKXsgcmV0dXJuIHtyZWplY3RlZDpyZWplY3RlZCwgc3RhdHVzOiBcInJlamVjdGVkXCIgfTt9KTtcbn1cblxudmFyIHBlb3BsZURhdGFMb2NhbCA9IFtdO1xudmFyIHBsYW5ldERhdGFMb2NhbCA9IFtdO1xuIiwiZnVuY3Rpb24gZ2V0UGxhbmV0RGF0YSgpe1xuICB2YXIgcGxhbmV0TmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wZW9wbGUtbGlzdF9fcGxhbmV0Jyk7XG4gIHZhciBwbGFuZXRVUkwgPSAnaHR0cHM6Ly9zd2FwaS5jby9hcGkvcGxhbmV0cy8nO1xuICB2YXIgcHJvbWlzZXMgPSBbXTtcblxuICByZXF1ZXN0U1dJbmZvKHBsYW5ldFVSTCwgXCJHRVRcIikudGhlbihfc3RhcnRMaXN0LCBlcnJvckhhbmRsZXIpO1xuXG4gIGZ1bmN0aW9uIF9zdGFydExpc3QoZGF0YSkge1xuICAgIHZhciBwbGFuZXROdW1iZXIgPSBkYXRhLmNvdW50O1xuICAgIF9wb3B1bGF0ZUxpc3QocGxhbmV0TnVtYmVyKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9wb3B1bGF0ZUxpc3QocGxhbmV0TnVtYmVyKSB7XG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPD0gcGxhbmV0TnVtYmVyOyBpKyspIHtcbiAgICAgIGN1cnJlbnRQbGFuZXRVUkwgPSBwbGFuZXRVUkwgKyBpO1xuICAgICAgcHJvbWlzZXMucHVzaChyZXF1ZXN0U1dJbmZvKGN1cnJlbnRQbGFuZXRVUkwsIFwiR0VUXCIpKTtcbiAgICB9XG4gICAgUHJvbWlzZS5hbGwocHJvbWlzZXMubWFwKHJlZmxlY3QpKS50aGVuKGZ1bmN0aW9uKHBsYW5ldHNEYXRhKXtcbiAgICAgIF9zdG9yZVBsYW5ldERhdGEocGxhbmV0c0RhdGEpO1xuICAgICAgX3JlbmRlclBsYW5ldEl0ZW0oKTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9zdG9yZVBsYW5ldERhdGEocGxhbmV0c0RhdGEpIHtcbiAgICB2YXIgaWQgPSAxO1xuICAgIHBsYW5ldHNEYXRhLmZvckVhY2goZnVuY3Rpb24ocGxhbmV0RGF0YSkge1xuICAgICAgaWYgKHBsYW5ldERhdGEucmVzb2x2ZWQpIHtcbiAgICAgICAgdmFyIG5ld1BsYW5ldCA9IHtcbiAgICAgICAgICBpZDogaWQsXG4gICAgICAgICAgbmFtZTogcGxhbmV0RGF0YS5yZXNvbHZlZC5uYW1lLFxuICAgICAgICAgIHRlcnJhaW46IHBsYW5ldERhdGEucmVzb2x2ZWQudGVycmFpbixcbiAgICAgICAgICBwb3B1bGF0aW9uOiBwbGFuZXREYXRhLnJlc29sdmVkLnBvcHVsYXRpb24sXG4gICAgICAgICAgZGlhbWV0ZXI6IHBsYW5ldERhdGEucmVzb2x2ZWQuZGlhbWV0ZXJcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAocGxhbmV0RGF0YS5yZXNvbHZlZC5yZXNpZGVudHMubGVuZ3RoKSB7XG4gICAgICAgICAgbmV3UGxhbmV0LnJlc2lkZW50cyA9IHBsYW5ldERhdGEucmVzb2x2ZWQucmVzaWRlbnRzLm1hcChmdW5jdGlvbihyZXNpZGVudFVSTCkge1xuICAgICAgICAgICAgcmV0dXJuIHJlc2lkZW50VVJMLnJlcGxhY2UoL1teMC05XS9nLCcnKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuZXdQbGFuZXQucmVzaWRlbnRzID0gXCJ1bmtub3duXCI7XG4gICAgICAgIH1cbiAgICAgICAgcGxhbmV0RGF0YUxvY2FsLnB1c2gobmV3UGxhbmV0KTtcbiAgICAgIH1cbiAgICAgIGlkKys7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBfcmVuZGVyUGxhbmV0SXRlbSgpIHtcbiAgICBwZW9wbGVEYXRhTG9jYWwuZm9yRWFjaCggZnVuY3Rpb24ocGVyc29uLCBpbmRleCkge1xuICAgICAgcGxhbmV0TmFtZVtpbmRleF0uaW5uZXJIVE1MID0gX2dldFBlcnNvblBsYW5ldE5hbWUocGVyc29uLnBsYW5ldCk7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBfZ2V0UGVyc29uUGxhbmV0TmFtZShwbGFuZXRJZCkge1xuICAgIHZhciBteVBsYW5ldCA9ICcnO1xuICAgIHBsYW5ldERhdGFMb2NhbC5mb3JFYWNoKGZ1bmN0aW9uKHBsYW5ldCkge1xuICAgICAgaWYgKHBsYW5ldC5pZCA9PT0gcGFyc2VJbnQocGxhbmV0SWQpKSB7XG4gICAgICAgIG15UGxhbmV0ID0gcGxhbmV0Lm5hbWU7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gbXlQbGFuZXQ7XG4gIH1cbn1cbiIsInZhciByZW5kZXJMaXN0ID0gKGZ1bmN0aW9uKCkge1xuICB2YXIgcGVvcGxlR3JpZCAgICA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wZW9wbGUtbGlzdF9fZ3JpZCcpO1xuICB2YXIgcGVvcGxlTGkgICAgICA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wZW9wbGUtbGlzdF9faXRlbScpO1xuICB2YXIgcGVvcGxlTmFtZTtcblxuICB2YXIgcGVvcGxlVVJMID0gJ2h0dHBzOi8vc3dhcGkuY28vYXBpL3Blb3BsZS8nO1xuICB2YXIgcHJvbWlzZXMgPSBbXTtcblxuICByZXF1ZXN0U1dJbmZvKHBlb3BsZVVSTCwgXCJHRVRcIikudGhlbihfc3RhcnRMaXN0LCBlcnJvckhhbmRsZXIpO1xuXG4gIGZ1bmN0aW9uIF9zdGFydExpc3QoZGF0YSkge1xuICAgIHZhciBwZW9wbGVOdW1iZXIgPSBkYXRhLmNvdW50O1xuICAgIF9idWlsZExpc3QocGVvcGxlTnVtYmVyKTtcbiAgICBfcG9wdWxhdGVMaXN0KHBlb3BsZU51bWJlcik7XG4gIH1cblxuICBmdW5jdGlvbiBfYnVpbGRMaXN0KHBlb3BsZU51bWJlcikge1xuICAgIGZvciAodmFyIGkgPSAxOyBpIDwgcGVvcGxlTnVtYmVyOyBpKz0yKSB7XG4gICAgICB2YXIgcGVvcGxlTGlDbG9uZSA9IHBlb3BsZUxpLmNsb25lTm9kZSh0cnVlKTtcbiAgICAgIHBlb3BsZUdyaWQuYXBwZW5kQ2hpbGQocGVvcGxlTGlDbG9uZSk7XG4gICAgfVxuICAgIHBlb3BsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucGVvcGxlLWxpc3RfX25hbWUnKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9wb3B1bGF0ZUxpc3QocGVvcGxlTnVtYmVyKSB7XG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPD0gcGVvcGxlTnVtYmVyOyBpKyspIHtcbiAgICAgIGN1cnJlbnRQZXJzb25VUkwgPSBwZW9wbGVVUkwgKyBpO1xuICAgICAgcHJvbWlzZXMucHVzaChyZXF1ZXN0U1dJbmZvKGN1cnJlbnRQZXJzb25VUkwsIFwiR0VUXCIpKTtcbiAgICB9XG4gICAgUHJvbWlzZS5hbGwocHJvbWlzZXMubWFwKHJlZmxlY3QpKS50aGVuKGZ1bmN0aW9uKHBlb3BsZURhdGEpe1xuICAgICAgX3N0b3JlUGVvcGxlRGF0YShwZW9wbGVEYXRhKTtcbiAgICAgIF9yZW5kZXJQZXJzb25JdGVtKCk7XG4gICAgICBnZXRQbGFuZXREYXRhKCk7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBfc3RvcmVQZW9wbGVEYXRhKHBlb3BsZURhdGEpIHtcbiAgICB2YXIgaWQgPSAxO1xuICAgIHBlb3BsZURhdGEuZm9yRWFjaChmdW5jdGlvbihwZXJzb25EYXRhKSB7XG4gICAgICBpZiAocGVyc29uRGF0YS5yZXNvbHZlZCkge1xuICAgICAgICB2YXIgbmV3UGVyc29uID0ge1xuICAgICAgICAgIGlkOiBpZCxcbiAgICAgICAgICBuYW1lOiBwZXJzb25EYXRhLnJlc29sdmVkLm5hbWUsXG4gICAgICAgICAgaGVpZ2h0OiBwZXJzb25EYXRhLnJlc29sdmVkLmhlaWdodCxcbiAgICAgICAgICB3ZWlnaHQ6IHBlcnNvbkRhdGEucmVzb2x2ZWQubWFzcyxcbiAgICAgICAgICBiaXJ0aF95ZWFyOiBwZXJzb25EYXRhLnJlc29sdmVkLmJpcnRoX3llYXIsXG4gICAgICAgICAgZ2VuZGVyOiBwZXJzb25EYXRhLnJlc29sdmVkLmdlbmRlclxuICAgICAgICB9O1xuICAgICAgICBwZXJzb25EYXRhLnJlc29sdmVkLmhvbWV3b3JsZCA/XG4gICAgICAgIG5ld1BlcnNvbi5wbGFuZXQgPSBwZXJzb25EYXRhLnJlc29sdmVkLmhvbWV3b3JsZC5yZXBsYWNlKC9bXjAtOV0vZywnJykgOlxuICAgICAgICBuZXdQZXJzb24ucGxhbmV0ID0gXCJ1bmtub3duXCI7XG5cbiAgICAgICAgcGVyc29uRGF0YS5yZXNvbHZlZC5zcGVjaWVzWzBdID9cbiAgICAgICAgbmV3UGVyc29uLnNwZWNpZXMgPSBwZXJzb25EYXRhLnJlc29sdmVkLnNwZWNpZXNbMF0ucmVwbGFjZSgvW14wLTldL2csJycpIDpcbiAgICAgICAgbmV3UGVyc29uLnNwZWNpZXMgPSBcInVua25vd25cIjtcblxuICAgICAgICBwZW9wbGVEYXRhTG9jYWwucHVzaChuZXdQZXJzb24pO1xuICAgICAgfVxuICAgICAgaWQrKztcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9yZW5kZXJQZXJzb25JdGVtKCkge1xuICAgIHBlb3BsZURhdGFMb2NhbC5mb3JFYWNoKCBmdW5jdGlvbihwZXJzb24sIGluZGV4KSB7XG4gICAgICBwZW9wbGVOYW1lW2luZGV4XS5pbm5lckhUTUwgPSBwZXJzb24ubmFtZTtcbiAgICB9KTtcbiAgfVxufSkoKTtcbiJdfQ==
