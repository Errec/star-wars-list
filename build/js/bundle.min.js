function requestSWInfo(e,n){return new Promise(function(t,r){var o=new XMLHttpRequest;o.open(n,e,!0),o.send(),o.onreadystatechange=function(){if(4===o.readyState)if(200===o.status){var e=o.responseText,n=JSON.parse(e);t(n)}else r(o.status)}})}function errorHandler(e){console.log("failed with status",status)}function reflect(e){return e.then(function(e){return{resolved:e,status:"resolved"}},function(e){return{rejected:e,status:"rejected"}})}function getPlanetData(){function e(e){for(var r=1;r<=e;r++)currentPlanetURL=a+r,l.push(requestSWInfo(currentPlanetURL,"GET"));Promise.all(l.map(reflect)).then(function(e){n(e),t()})}function n(e){var n=1;e.forEach(function(e){if(e.resolved){var t={id:n,name:e.resolved.name,terrain:e.resolved.terrain,population:e.resolved.population,diameter:e.resolved.diameter};e.resolved.residents.length?t.residents=e.resolved.residents.map(function(e){return e.replace(/[^0-9]/g,"")}):t.residents="unknown",planetDataLocal.push(t)}n++})}function t(){peopleDataLocal.forEach(function(e,n){"unknown"===e.planet?o[n].innerHTML="Unknown":o[n].innerHTML=r(e.planet)})}function r(e){var n="";return planetDataLocal.forEach(function(t){t.id===parseInt(e)&&(n=t.name)}),n}var o=document.querySelectorAll(".people-list__planet"),a="https://swapi.co/api/planets/",l=[];requestSWInfo(a,"GET").then(function(n){e(n.count)},errorHandler)}var peopleDataLocal=[],planetDataLocal=[],renderList=function(){function e(e){for(var n=1;n<e;n+=2){var t=l.cloneNode(!0);a.appendChild(t)}o=document.querySelectorAll(".people-list__name")}function n(e){for(var n=1;n<=e;n++)currentPersonURL=s+n,i.push(requestSWInfo(currentPersonURL,"GET"));Promise.all(i.map(reflect)).then(function(e){t(e),r(),getPlanetData()})}function t(e){var n=1;e.forEach(function(e){if(e.resolved){var t={id:n,name:e.resolved.name,height:e.resolved.height,weight:e.resolved.mass,birth_year:e.resolved.birth_year,gender:e.resolved.gender};e.resolved.homeworld?t.planet=e.resolved.homeworld.replace(/[^0-9]/g,""):t.planet="unknown",e.resolved.species[0]?t.species=e.resolved.species[0].replace(/[^0-9]/g,""):t.species="unknown",peopleDataLocal.push(t)}n++})}function r(){peopleDataLocal.forEach(function(e,n){o[n].innerHTML=e.name})}var o,a=document.getElementById("people-grid"),l=document.getElementById("people-item"),s="https://swapi.co/api/people/",i=[];requestSWInfo(s,"GET").then(function(t){var r=t.count;e(r),n(r)},errorHandler)}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJwbGFuZXQtbGlzdC5qcyIsInBlb3BsZS1saXN0LmpzIl0sIm5hbWVzIjpbInJlcXVlc3RTV0luZm8iLCJ1cmwiLCJtZXRob2RUeXBlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJ4aHIiLCJYTUxIdHRwUmVxdWVzdCIsIm9wZW4iLCJzZW5kIiwib25yZWFkeXN0YXRlY2hhbmdlIiwicmVhZHlTdGF0ZSIsInN0YXR1cyIsInJlc3AiLCJyZXNwb25zZVRleHQiLCJyZXNwSnNvbiIsIkpTT04iLCJwYXJzZSIsImVycm9ySGFuZGxlciIsInN0YXR1c0NvZGUiLCJjb25zb2xlIiwibG9nIiwicmVmbGVjdCIsInByb21pc2UiLCJ0aGVuIiwicmVzb2x2ZWQiLCJyZWplY3RlZCIsImdldFBsYW5ldERhdGEiLCJfcG9wdWxhdGVMaXN0IiwicGxhbmV0TnVtYmVyIiwiaSIsImN1cnJlbnRQbGFuZXRVUkwiLCJwbGFuZXRVUkwiLCJwcm9taXNlcyIsInB1c2giLCJhbGwiLCJtYXAiLCJwbGFuZXRzRGF0YSIsIl9zdG9yZVBsYW5ldERhdGEiLCJfcmVuZGVyUGxhbmV0SXRlbSIsImlkIiwiZm9yRWFjaCIsInBsYW5ldERhdGEiLCJuZXdQbGFuZXQiLCJuYW1lIiwidGVycmFpbiIsInBvcHVsYXRpb24iLCJkaWFtZXRlciIsInJlc2lkZW50cyIsImxlbmd0aCIsInJlc2lkZW50VVJMIiwicmVwbGFjZSIsInBsYW5ldERhdGFMb2NhbCIsInBlb3BsZURhdGFMb2NhbCIsInBlcnNvbiIsImluZGV4IiwicGxhbmV0IiwicGxhbmV0TmFtZSIsImlubmVySFRNTCIsIl9nZXRQZXJzb25QbGFuZXROYW1lIiwicGxhbmV0SWQiLCJteVBsYW5ldCIsInBhcnNlSW50IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZGF0YSIsImNvdW50IiwicmVuZGVyTGlzdCIsIl9idWlsZExpc3QiLCJwZW9wbGVOdW1iZXIiLCJwZW9wbGVMaUNsb25lIiwicGVvcGxlTGkiLCJjbG9uZU5vZGUiLCJwZW9wbGVHcmlkIiwiYXBwZW5kQ2hpbGQiLCJwZW9wbGVOYW1lIiwiY3VycmVudFBlcnNvblVSTCIsInBlb3BsZVVSTCIsInBlb3BsZURhdGEiLCJfc3RvcmVQZW9wbGVEYXRhIiwiX3JlbmRlclBlcnNvbkl0ZW0iLCJwZXJzb25EYXRhIiwibmV3UGVyc29uIiwiaGVpZ2h0Iiwid2VpZ2h0IiwibWFzcyIsImJpcnRoX3llYXIiLCJnZW5kZXIiLCJob21ld29ybGQiLCJzcGVjaWVzIiwiZ2V0RWxlbWVudEJ5SWQiXSwibWFwcGluZ3MiOiJBQUFBLFNBQUFBLGNBQUFDLEVBQUFDLEdBb0JBLE9BbkJBLElBQUFDLFFBQUEsU0FBQUMsRUFBQUMsR0FDQSxJQUFBQyxFQUFBLElBQUFDLGVBQ0FELEVBQUFFLEtBQUFOLEVBQUFELEdBQUEsR0FDQUssRUFBQUcsT0FDQUgsRUFBQUksbUJBQUEsV0FDQSxHQUFBLElBQUFKLEVBQUFLLFdBQ0EsR0FBQSxNQUFBTCxFQUFBTSxPQUFBLENBQ0EsSUFBQUMsRUFBQVAsRUFBQVEsYUFDQUMsRUFBQUMsS0FBQUMsTUFBQUosR0FDQVQsRUFBQVcsUUFFQVYsRUFBQUMsRUFBQU0sV0FXQSxTQUFBTSxhQUFBQyxHQUNBQyxRQUFBQyxJQUFBLHFCQUFBVCxRQUdBLFNBQUFVLFFBQUFDLEdBQ0EsT0FBQUEsRUFBQUMsS0FBQSxTQUFBQyxHQUFBLE9BQUFBLFNBQUFBLEVBQUFiLE9BQUEsYUFDQSxTQUFBYyxHQUFBLE9BQUFBLFNBQUFBLEVBQUFkLE9BQUEsY0M3QkEsU0FBQWUsZ0JBWUEsU0FBQUMsRUFBQUMsR0FDQSxJQUFBLElBQUFDLEVBQUEsRUFBQUEsR0FBQUQsRUFBQUMsSUFDQUMsaUJBQUFDLEVBQUFGLEVBQ0FHLEVBQUFDLEtBQUFsQyxjQUFBK0IsaUJBQUEsUUFFQTVCLFFBQUFnQyxJQUFBRixFQUFBRyxJQUFBZCxVQUFBRSxLQUFBLFNBQUFhLEdBQ0FDLEVBQUFELEdBQ0FFLE1BSUEsU0FBQUQsRUFBQUQsR0FDQSxJQUFB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ZXN0U1dJbmZvKHVybCwgbWV0aG9kVHlwZSl7XG4gIHZhciBwcm9taXNlT2JqID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcbiAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgeGhyLm9wZW4obWV0aG9kVHlwZSwgdXJsLCB0cnVlKTtcbiAgICB4aHIuc2VuZCgpO1xuICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpe1xuICAgICAgaWYoeGhyLnJlYWR5U3RhdGUgPT09IDQpe1xuICAgICAgICAgaWYoeGhyLnN0YXR1cyA9PT0gMjAwKXtcbiAgICAgICAgICB2YXIgcmVzcCA9IHhoci5yZXNwb25zZVRleHQ7XG4gICAgICAgICAgICB2YXIgcmVzcEpzb24gPSBKU09OLnBhcnNlKHJlc3ApO1xuICAgICAgICAgICAgcmVzb2x2ZShyZXNwSnNvbik7XG4gICAgICAgICB9IGVsc2V7XG4gICAgICAgICAgICByZWplY3QoeGhyLnN0YXR1cyk7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcInhociBmYWlsZWRcIik7IC8vIFRPRE86IGFwcGVuZCAnY2FudCBmaW5kJyBtc2dcbiAgICAgICAgICAgfVxuICAgICAgfSBlbHNle1xuICAgICAgICAgLy8gY29uc29sZS5sb2coXCJ4aHIgcHJvY2Vzc2luZyBnb2luZyBvblwiKTsgLy8gVE9ETzogYWRkIGxvYWRpbmcgYW5pbWF0aW9uXG4gICAgICAgICB9XG4gICAgfTtcbiAgfSk7XG4gIHJldHVybiBwcm9taXNlT2JqO1xufVxuXG5mdW5jdGlvbiBlcnJvckhhbmRsZXIoc3RhdHVzQ29kZSl7XG4gIGNvbnNvbGUubG9nKFwiZmFpbGVkIHdpdGggc3RhdHVzXCIsIHN0YXR1cyk7XG59XG5cbmZ1bmN0aW9uIHJlZmxlY3QocHJvbWlzZSl7XG4gIHJldHVybiBwcm9taXNlLnRoZW4oZnVuY3Rpb24ocmVzb2x2ZWQpeyByZXR1cm4ge3Jlc29sdmVkOnJlc29sdmVkLCBzdGF0dXM6IFwicmVzb2x2ZWRcIiB9O30sXG4gICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24ocmVqZWN0ZWQpeyByZXR1cm4ge3JlamVjdGVkOnJlamVjdGVkLCBzdGF0dXM6IFwicmVqZWN0ZWRcIiB9O30pO1xufVxuXG52YXIgcGVvcGxlRGF0YUxvY2FsID0gW107XG52YXIgcGxhbmV0RGF0YUxvY2FsID0gW107XG4iLCJmdW5jdGlvbiBnZXRQbGFuZXREYXRhKCl7XG4gIHZhciBwbGFuZXROYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnBlb3BsZS1saXN0X19wbGFuZXQnKTtcbiAgdmFyIHBsYW5ldFVSTCA9ICdodHRwczovL3N3YXBpLmNvL2FwaS9wbGFuZXRzLyc7XG4gIHZhciBwcm9taXNlcyA9IFtdO1xuXG4gIHJlcXVlc3RTV0luZm8ocGxhbmV0VVJMLCBcIkdFVFwiKS50aGVuKF9zdGFydExpc3QsIGVycm9ySGFuZGxlcik7XG5cbiAgZnVuY3Rpb24gX3N0YXJ0TGlzdChkYXRhKSB7XG4gICAgdmFyIHBsYW5ldE51bWJlciA9IGRhdGEuY291bnQ7XG4gICAgX3BvcHVsYXRlTGlzdChwbGFuZXROdW1iZXIpO1xuICB9XG5cbiAgZnVuY3Rpb24gX3BvcHVsYXRlTGlzdChwbGFuZXROdW1iZXIpIHtcbiAgICBmb3IgKHZhciBpID0gMTsgaSA8PSBwbGFuZXROdW1iZXI7IGkrKykge1xuICAgICAgY3VycmVudFBsYW5ldFVSTCA9IHBsYW5ldFVSTCArIGk7XG4gICAgICBwcm9taXNlcy5wdXNoKHJlcXVlc3RTV0luZm8oY3VycmVudFBsYW5ldFVSTCwgXCJHRVRcIikpO1xuICAgIH1cbiAgICBQcm9taXNlLmFsbChwcm9taXNlcy5tYXAocmVmbGVjdCkpLnRoZW4oZnVuY3Rpb24ocGxhbmV0c0RhdGEpe1xuICAgICAgX3N0b3JlUGxhbmV0RGF0YShwbGFuZXRzRGF0YSk7XG4gICAgICBfcmVuZGVyUGxhbmV0SXRlbSgpO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gX3N0b3JlUGxhbmV0RGF0YShwbGFuZXRzRGF0YSkge1xuICAgIHZhciBpZCA9IDE7XG4gICAgcGxhbmV0c0RhdGEuZm9yRWFjaChmdW5jdGlvbihwbGFuZXREYXRhKSB7XG4gICAgICBpZiAocGxhbmV0RGF0YS5yZXNvbHZlZCkge1xuICAgICAgICB2YXIgbmV3UGxhbmV0ID0ge1xuICAgICAgICAgIGlkOiBpZCxcbiAgICAgICAgICBuYW1lOiBwbGFuZXREYXRhLnJlc29sdmVkLm5hbWUsXG4gICAgICAgICAgdGVycmFpbjogcGxhbmV0RGF0YS5yZXNvbHZlZC50ZXJyYWluLFxuICAgICAgICAgIHBvcHVsYXRpb246IHBsYW5ldERhdGEucmVzb2x2ZWQucG9wdWxhdGlvbixcbiAgICAgICAgICBkaWFtZXRlcjogcGxhbmV0RGF0YS5yZXNvbHZlZC5kaWFtZXRlclxuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChwbGFuZXREYXRhLnJlc29sdmVkLnJlc2lkZW50cy5sZW5ndGgpIHtcbiAgICAgICAgICBuZXdQbGFuZXQucmVzaWRlbnRzID0gcGxhbmV0RGF0YS5yZXNvbHZlZC5yZXNpZGVudHMubWFwKGZ1bmN0aW9uKHJlc2lkZW50VVJMKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzaWRlbnRVUkwucmVwbGFjZSgvW14wLTldL2csJycpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5ld1BsYW5ldC5yZXNpZGVudHMgPSBcInVua25vd25cIjtcbiAgICAgICAgfVxuICAgICAgICBwbGFuZXREYXRhTG9jYWwucHVzaChuZXdQbGFuZXQpO1xuICAgICAgfVxuICAgICAgaWQrKztcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9yZW5kZXJQbGFuZXRJdGVtKCkge1xuICAgIHBlb3BsZURhdGFMb2NhbC5mb3JFYWNoKCBmdW5jdGlvbihwZXJzb24sIGluZGV4KSB7XG4gICAgICBwZXJzb24ucGxhbmV0ID09PSAndW5rbm93bicgPyBwbGFuZXROYW1lW2luZGV4XS5pbm5lckhUTUwgPSAnVW5rbm93bicgOiBwbGFuZXROYW1lW2luZGV4XS5pbm5lckhUTUwgPSBfZ2V0UGVyc29uUGxhbmV0TmFtZShwZXJzb24ucGxhbmV0KTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9nZXRQZXJzb25QbGFuZXROYW1lKHBsYW5ldElkKSB7XG4gICAgdmFyIG15UGxhbmV0ID0gJyc7XG4gICAgcGxhbmV0RGF0YUxvY2FsLmZvckVhY2goZnVuY3Rpb24ocGxhbmV0KSB7XG4gICAgICBpZiAocGxhbmV0LmlkID09PSBwYXJzZUludChwbGFuZXRJZCkpIHtcbiAgICAgICAgbXlQbGFuZXQgPSBwbGFuZXQubmFtZTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gbXlQbGFuZXQ7XG4gIH1cbn1cbiIsInZhciByZW5kZXJMaXN0ID0gKGZ1bmN0aW9uKCkge1xuICB2YXIgcGVvcGxlR3JpZCAgICA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwZW9wbGUtZ3JpZCcpO1xuICB2YXIgcGVvcGxlTGkgICAgICA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwZW9wbGUtaXRlbScpO1xuICB2YXIgcGVvcGxlTmFtZTtcblxuICB2YXIgcGVvcGxlVVJMID0gJ2h0dHBzOi8vc3dhcGkuY28vYXBpL3Blb3BsZS8nO1xuICB2YXIgcHJvbWlzZXMgPSBbXTtcblxuICByZXF1ZXN0U1dJbmZvKHBlb3BsZVVSTCwgXCJHRVRcIikudGhlbihfc3RhcnRMaXN0LCBlcnJvckhhbmRsZXIpO1xuXG4gIGZ1bmN0aW9uIF9zdGFydExpc3QoZGF0YSkge1xuICAgIHZhciBwZW9wbGVOdW1iZXIgPSBkYXRhLmNvdW50O1xuICAgIF9idWlsZExpc3QocGVvcGxlTnVtYmVyKTtcbiAgICBfcG9wdWxhdGVMaXN0KHBlb3BsZU51bWJlcik7XG4gIH1cblxuICBmdW5jdGlvbiBfYnVpbGRMaXN0KHBlb3BsZU51bWJlcikge1xuICAgIGZvciAodmFyIGkgPSAxOyBpIDwgcGVvcGxlTnVtYmVyOyBpKz0yKSB7XG4gICAgICB2YXIgcGVvcGxlTGlDbG9uZSA9IHBlb3BsZUxpLmNsb25lTm9kZSh0cnVlKTtcbiAgICAgIHBlb3BsZUdyaWQuYXBwZW5kQ2hpbGQocGVvcGxlTGlDbG9uZSk7XG4gICAgfVxuICAgIHBlb3BsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucGVvcGxlLWxpc3RfX25hbWUnKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9wb3B1bGF0ZUxpc3QocGVvcGxlTnVtYmVyKSB7XG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPD0gcGVvcGxlTnVtYmVyOyBpKyspIHtcbiAgICAgIGN1cnJlbnRQZXJzb25VUkwgPSBwZW9wbGVVUkwgKyBpO1xuICAgICAgcHJvbWlzZXMucHVzaChyZXF1ZXN0U1dJbmZvKGN1cnJlbnRQZXJzb25VUkwsIFwiR0VUXCIpKTtcbiAgICB9XG4gICAgUHJvbWlzZS5hbGwocHJvbWlzZXMubWFwKHJlZmxlY3QpKS50aGVuKGZ1bmN0aW9uKHBlb3BsZURhdGEpe1xuICAgICAgX3N0b3JlUGVvcGxlRGF0YShwZW9wbGVEYXRhKTtcbiAgICAgIF9yZW5kZXJQZXJzb25JdGVtKCk7XG4gICAgICBnZXRQbGFuZXREYXRhKCk7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBfc3RvcmVQZW9wbGVEYXRhKHBlb3BsZURhdGEpIHtcbiAgICB2YXIgaWQgPSAxO1xuICAgIHBlb3BsZURhdGEuZm9yRWFjaChmdW5jdGlvbihwZXJzb25EYXRhKSB7XG4gICAgICBpZiAocGVyc29uRGF0YS5yZXNvbHZlZCkge1xuICAgICAgICB2YXIgbmV3UGVyc29uID0ge1xuICAgICAgICAgIGlkOiBpZCxcbiAgICAgICAgICBuYW1lOiBwZXJzb25EYXRhLnJlc29sdmVkLm5hbWUsXG4gICAgICAgICAgaGVpZ2h0OiBwZXJzb25EYXRhLnJlc29sdmVkLmhlaWdodCxcbiAgICAgICAgICB3ZWlnaHQ6IHBlcnNvbkRhdGEucmVzb2x2ZWQubWFzcyxcbiAgICAgICAgICBiaXJ0aF95ZWFyOiBwZXJzb25EYXRhLnJlc29sdmVkLmJpcnRoX3llYXIsXG4gICAgICAgICAgZ2VuZGVyOiBwZXJzb25EYXRhLnJlc29sdmVkLmdlbmRlclxuICAgICAgICB9O1xuICAgICAgICBwZXJzb25EYXRhLnJlc29sdmVkLmhvbWV3b3JsZCA/XG4gICAgICAgIG5ld1BlcnNvbi5wbGFuZXQgPSBwZXJzb25EYXRhLnJlc29sdmVkLmhvbWV3b3JsZC5yZXBsYWNlKC9bXjAtOV0vZywnJykgOlxuICAgICAgICBuZXdQZXJzb24ucGxhbmV0ID0gXCJ1bmtub3duXCI7XG5cbiAgICAgICAgcGVyc29uRGF0YS5yZXNvbHZlZC5zcGVjaWVzWzBdID9cbiAgICAgICAgbmV3UGVyc29uLnNwZWNpZXMgPSBwZXJzb25EYXRhLnJlc29sdmVkLnNwZWNpZXNbMF0ucmVwbGFjZSgvW14wLTldL2csJycpIDpcbiAgICAgICAgbmV3UGVyc29uLnNwZWNpZXMgPSBcInVua25vd25cIjtcblxuICAgICAgICBwZW9wbGVEYXRhTG9jYWwucHVzaChuZXdQZXJzb24pO1xuICAgICAgfVxuICAgICAgaWQrKztcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9yZW5kZXJQZXJzb25JdGVtKCkge1xuICAgIHBlb3BsZURhdGFMb2NhbC5mb3JFYWNoKCBmdW5jdGlvbihwZXJzb24sIGluZGV4KSB7XG4gICAgICBwZW9wbGVOYW1lW2luZGV4XS5pbm5lckhUTUwgPSBwZXJzb24ubmFtZTtcbiAgICB9KTtcbiAgfVxufSkoKTtcbiJdfQ==
