function requestSWInfo(e,n){return new Promise(function(t,r){var o=new XMLHttpRequest;o.open(n,e,!0),o.send(),o.onreadystatechange=function(){if(4===o.readyState)if(200===o.status){var e=o.responseText,n=JSON.parse(e);t(n)}else r(o.status)}})}function errorHandler(e){console.log("failed with status",status)}function reflect(e){return e.then(function(e){return{resolved:e,status:"resolved"}},function(e){return{rejected:e,status:"rejected"}})}function getPlanetData(){function e(e){for(var r=1;r<=e;r++)currentPlanetURL=a+r,l.push(requestSWInfo(currentPlanetURL,"GET"));Promise.all(l.map(reflect)).then(function(e){n(e),t()})}function n(e){var n=1;e.forEach(function(e){if(e.resolved){var t={id:n,name:e.resolved.name,terrain:e.resolved.terrain,population:e.resolved.population,diameter:e.resolved.diameter};e.resolved.residents.length?t.residents=e.resolved.residents.map(function(e){return e.replace(/[^0-9]/g,"")}):t.residents="unknown",planetDataLocal.push(t)}n++})}function t(){peopleDataLocal.forEach(function(e,n){o[n].innerHTML=r(e.planet)})}function r(e){var n="";return planetDataLocal.forEach(function(t){t.id===parseInt(e)&&(n=t.name)}),n}var o=document.querySelectorAll(".people-list__planet"),a="https://swapi.co/api/planets/",l=[];requestSWInfo(a,"GET").then(function(n){e(n.count)},errorHandler)}var peopleDataLocal=[],planetDataLocal=[],renderList=function(){function e(e){for(var n=1;n<e;n+=2){var t=l.cloneNode(!0);a.appendChild(t)}o=document.querySelectorAll(".people-list__name")}function n(e){for(var n=1;n<=e;n++)currentPersonURL=s+n,i.push(requestSWInfo(currentPersonURL,"GET"));Promise.all(i.map(reflect)).then(function(e){t(e),r(),getPlanetData()})}function t(e){var n=1;e.forEach(function(e){if(e.resolved){var t={id:n,name:e.resolved.name,height:e.resolved.height,weight:e.resolved.mass,birth_year:e.resolved.birth_year,gender:e.resolved.gender};e.resolved.homeworld?t.planet=e.resolved.homeworld.replace(/[^0-9]/g,""):t.planet="unknown",e.resolved.species[0]?t.species=e.resolved.species[0].replace(/[^0-9]/g,""):t.species="unknown",peopleDataLocal.push(t)}n++})}function r(){peopleDataLocal.forEach(function(e,n){o[n].innerHTML=e.name})}var o,a=document.getElementById("people-grid"),l=document.querySelector(".people-list__item"),s="https://swapi.co/api/people/",i=[];requestSWInfo(s,"GET").then(function(t){var r=t.count;e(r),n(r)},errorHandler)}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJwbGFuZXQtbGlzdC5qcyIsInBlb3BsZS1saXN0LmpzIl0sIm5hbWVzIjpbInJlcXVlc3RTV0luZm8iLCJ1cmwiLCJtZXRob2RUeXBlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJ4aHIiLCJYTUxIdHRwUmVxdWVzdCIsIm9wZW4iLCJzZW5kIiwib25yZWFkeXN0YXRlY2hhbmdlIiwicmVhZHlTdGF0ZSIsInN0YXR1cyIsInJlc3AiLCJyZXNwb25zZVRleHQiLCJyZXNwSnNvbiIsIkpTT04iLCJwYXJzZSIsImVycm9ySGFuZGxlciIsInN0YXR1c0NvZGUiLCJjb25zb2xlIiwibG9nIiwicmVmbGVjdCIsInByb21pc2UiLCJ0aGVuIiwicmVzb2x2ZWQiLCJyZWplY3RlZCIsImdldFBsYW5ldERhdGEiLCJfcG9wdWxhdGVMaXN0IiwicGxhbmV0TnVtYmVyIiwiaSIsImN1cnJlbnRQbGFuZXRVUkwiLCJwbGFuZXRVUkwiLCJwcm9taXNlcyIsInB1c2giLCJhbGwiLCJtYXAiLCJwbGFuZXRzRGF0YSIsIl9zdG9yZVBsYW5ldERhdGEiLCJfcmVuZGVyUGxhbmV0SXRlbSIsImlkIiwiZm9yRWFjaCIsInBsYW5ldERhdGEiLCJuZXdQbGFuZXQiLCJuYW1lIiwidGVycmFpbiIsInBvcHVsYXRpb24iLCJkaWFtZXRlciIsInJlc2lkZW50cyIsImxlbmd0aCIsInJlc2lkZW50VVJMIiwicmVwbGFjZSIsInBsYW5ldERhdGFMb2NhbCIsInBlb3BsZURhdGFMb2NhbCIsInBlcnNvbiIsImluZGV4IiwicGxhbmV0TmFtZSIsImlubmVySFRNTCIsIl9nZXRQZXJzb25QbGFuZXROYW1lIiwicGxhbmV0IiwicGxhbmV0SWQiLCJteVBsYW5ldCIsInBhcnNlSW50IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZGF0YSIsImNvdW50IiwicmVuZGVyTGlzdCIsIl9idWlsZExpc3QiLCJwZW9wbGVOdW1iZXIiLCJwZW9wbGVMaUNsb25lIiwicGVvcGxlTGkiLCJjbG9uZU5vZGUiLCJwZW9wbGVHcmlkIiwiYXBwZW5kQ2hpbGQiLCJwZW9wbGVOYW1lIiwiY3VycmVudFBlcnNvblVSTCIsInBlb3BsZVVSTCIsInBlb3BsZURhdGEiLCJfc3RvcmVQZW9wbGVEYXRhIiwiX3JlbmRlclBlcnNvbkl0ZW0iLCJwZXJzb25EYXRhIiwibmV3UGVyc29uIiwiaGVpZ2h0Iiwid2VpZ2h0IiwibWFzcyIsImJpcnRoX3llYXIiLCJnZW5kZXIiLCJob21ld29ybGQiLCJzcGVjaWVzIiwiZ2V0RWxlbWVudEJ5SWQiLCJxdWVyeVNlbGVjdG9yIl0sIm1hcHBpbmdzIjoiQUFBQSxTQUFBQSxjQUFBQyxFQUFBQyxHQW9CQSxPQW5CQSxJQUFBQyxRQUFBLFNBQUFDLEVBQUFDLEdBQ0EsSUFBQUMsRUFBQSxJQUFBQyxlQUNBRCxFQUFBRSxLQUFBTixFQUFBRCxHQUFBLEdBQ0FLLEVBQUFHLE9BQ0FILEVBQUFJLG1CQUFBLFdBQ0EsR0FBQSxJQUFBSixFQUFBSyxXQUNBLEdBQUEsTUFBQUwsRUFBQU0sT0FBQSxDQUNBLElBQUFDLEVBQUFQLEVBQUFRLGFBQ0FDLEVBQUFDLEtBQUFDLE1BQUFKLEdBQ0FULEVBQUFXLFFBRUFWLEVBQUFDLEVBQUFNLFdBV0EsU0FBQU0sYUFBQUMsR0FDQUMsUUFBQUMsSUFBQSxxQkFBQVQsUUFHQSxTQUFBVSxRQUFBQyxHQUNBLE9BQUFBLEVBQUFDLEtBQUEsU0FBQUMsR0FBQSxPQUFBQSxTQUFBQSxFQUFBYixPQUFBLGFBQ0EsU0FBQWMsR0FBQSxPQUFBQSxTQUFBQSxFQUFBZCxPQUFBLGNDN0JBLFNBQUFlLGdCQVlBLFNBQUFDLEVBQUFDLEdBQ0EsSUFBQSxJQUFBQyxFQUFBLEVBQUFBLEdBQUFELEVBQUFDLElBQ0FDLGlCQUFBQyxFQUFBRixFQUNBRyxFQUFBQyxLQUFBbEMsY0FBQStCLGlCQUFBLFFBRUE1QixRQUFBZ0MsSUFBQUYsRUFBQUcsSUFBQWQsVUFBQUUsS0FBQSxTQUFBYSxHQUNBQyxFQUFBRCxHQUNBRSxNQUlBLFNBQUFELEVBQUFELEdBQ0EsSUFBQUcsRUFBQSxFQUNBSCxFQUFBSSxRQUFBLFNBQUFDLEdBQ0EsR0FBQUEsRUFBQWpCLFNBQUEsQ0FDQSxJQUFBa0IsR0FDQUgsR0FBQUEsRUFDQUksS0FBQUYsRUFBQWpCLFNBQUFtQixLQUNBQyxRQUFBSCxFQUFBakIsU0FBQW9CLFFBQ0FDLFdBQUFKLEVBQUFqQixTQUFBcUIsV0FDQUMsU0FBQUwsRUFBQWpCLFNBQUFzQixVQUdBTCxFQUFBakIsU0FBQXVCLFVBQUFDLE9BQ0FOLEVBQUFLLFVBQUFOLEVBQUFqQixTQUFBdUIsVUFBQVosSUFBQSxTQUFBYyxHQUNBLE9BQUFBLEVBQUFDLFFBQUEsVUFBQSxNQUdBUixFQUFBSyxVQUFBLFVBRUFJLGdCQUFBbEIsS0FBQVMsR0FFQUgsTUFJQSxTQUFBRCxJQUNBYyxnQkFBQVosUUFBQSxTQUFBYSxFQUFBQyxHQUNBQyxFQUFBRCxHQUFBRSxVQUFBQyxFQUFBSixFQUFBSyxVQUlBLFNBQUFELEVBQUFFLEdBQ0EsSUFBQUMsRUFBQSxHQU1BLE9BTEFULGdCQUFBWCxRQUFBLFNBQUFrQixHQUNBQSxFQUFBbkIsS0FBQXNCLFNBQUFGLEtBQ0FDLEVBQUFGLEVBQUFmLFFBR0FpQixFQTVEQSxJQUFBTCxFQUFBTyxTQUFBQyxpQkFBQSx3QkFDQWhDLEVBQUEsZ0NBQ0FDLEtBRUFqQyxjQUFBZ0MsRUFBQSxPQUFBUixLQUVBLFNBQUF5QyxHQUVBckMsRUFEQXFDLEVBQUFDLFFBSEFoRCxjRDJCQSxJQUFBbUMsbUJBQ0FELG1CRWpDQWUsV0FBQSxXQWdCQSxTQUFBQyxFQUFBQyxHQUNBLElBQUEsSUFBQXZDLEVBQUEsRUFBQUEsRUFBQXVDLEVBQUF2QyxHQUFBLEVBQUEsQ0FDQSxJQUFBd0MsRUFBQUMsRUFBQUMsV0FBQSxHQUNBQyxFQUFBQyxZQUFBSixHQUVBSyxFQUFBWixTQUFBQyxpQkFBQSxzQkFHQSxTQUFBcEMsRUFBQXlDLEdBQ0EsSUFBQSxJQUFBdkMsRUFBQSxFQUFBQSxHQUFBdUMsRUFBQXZDLElBQ0E4QyxpQkFBQUMsRUFBQS9DLEVBQ0FHLEVBQUFDLEtBQUFsQyxjQUFBNEUsaUJBQUEsUUFFQXpFLFFBQUFnQyxJQUFBRixFQUFBRyxJQUFBZCxVQUFBRSxLQUFBLFNBQUFzRCxHQUNBQyxFQUFBRCxHQUNBRSxJQUNBckQsa0JBSUEsU0FBQW9ELEVBQUFELEdBQ0EsSUFBQXRDLEVBQUEsRUFDQXNDLEVBQUFyQyxRQUFBLFNBQUF3QyxHQUNBLEdBQUFBLEVBQUF4RCxTQUFBLENBQ0EsSUFBQXlELEdBQ0ExQyxHQUFBQSxFQUNBSSxLQUFBcUMsRUFBQXhELFNBQUFtQixLQUNBdUMsT0FBQUYsRUFBQXhELFNBQUEwRCxPQUNBQyxPQUFBSCxFQUFBeEQsU0FBQTRELEtBQ0FDLFdBQUFMLEVBQUF4RCxTQUFBNkQsV0FDQUMsT0FBQU4sRUFBQXhELFNBQUE4RCxRQUVBTixFQUFBeEQsU0FBQStELFVBQ0FOLEVBQUF2QixPQUFBc0IsRUFBQXhELFNBQUErRCxVQUFBckMsUUFBQSxVQUFBLElBQ0ErQixFQUFBdkIsT0FBQSxVQUVBc0IsRUFBQXhELFNBQUFnRSxRQUFBLEdBQ0FQLEVBQUFPLFFBQUFSLEVBQUF4RCxTQUFBZ0UsUUFBQSxHQUFBdEMsUUFBQSxVQUFBLElBQ0ErQixFQUFBTyxRQUFBLFVBRUFwQyxnQkFBQW5CLEtBQUFnRCxHQUVBMUMsTUFJQSxTQUFBd0MsSUFDQTNCLGdCQUFBWixRQUFBLFNBQUFhLEVBQUFDLEdBQ0FvQixFQUFBcEIsR0FBQUUsVUFBQUgsRUFBQVYsT0EvREEsSUFFQStCLEVBRkFGLEVBQUFWLFNBQUEyQixlQUFBLGVBQ0FuQixFQUFBUixTQUFBNEIsY0FBQSxzQkFHQWQsRUFBQSwrQkFDQTVDLEtBRUFqQyxjQUFBNkUsRUFBQSxPQUFBckQsS0FFQSxTQUFBeUMsR0FDQSxJQUFBSSxFQUFBSixFQUFBQyxNQUNBRSxFQUFBQyxHQUNBekMsRUFBQXlDLElBTEFuRCxjQVJBIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIHJlcXVlc3RTV0luZm8odXJsLCBtZXRob2RUeXBlKXtcbiAgdmFyIHByb21pc2VPYmogPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xuICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICB4aHIub3BlbihtZXRob2RUeXBlLCB1cmwsIHRydWUpO1xuICAgIHhoci5zZW5kKCk7XG4gICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCl7XG4gICAgICBpZih4aHIucmVhZHlTdGF0ZSA9PT0gNCl7XG4gICAgICAgICBpZih4aHIuc3RhdHVzID09PSAyMDApe1xuICAgICAgICAgIHZhciByZXNwID0geGhyLnJlc3BvbnNlVGV4dDtcbiAgICAgICAgICAgIHZhciByZXNwSnNvbiA9IEpTT04ucGFyc2UocmVzcCk7XG4gICAgICAgICAgICByZXNvbHZlKHJlc3BKc29uKTtcbiAgICAgICAgIH0gZWxzZXtcbiAgICAgICAgICAgIHJlamVjdCh4aHIuc3RhdHVzKTtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwieGhyIGZhaWxlZFwiKTsgLy8gVE9ETzogYXBwZW5kICdjYW50IGZpbmQnIG1zZ1xuICAgICAgICAgICB9XG4gICAgICB9IGVsc2V7XG4gICAgICAgICAvLyBjb25zb2xlLmxvZyhcInhociBwcm9jZXNzaW5nIGdvaW5nIG9uXCIpOyAvLyBUT0RPOiBhZGQgbG9hZGluZyBhbmltYXRpb25cbiAgICAgICAgIH1cbiAgICB9O1xuICB9KTtcbiAgcmV0dXJuIHByb21pc2VPYmo7XG59XG5cbmZ1bmN0aW9uIGVycm9ySGFuZGxlcihzdGF0dXNDb2RlKXtcbiAgY29uc29sZS5sb2coXCJmYWlsZWQgd2l0aCBzdGF0dXNcIiwgc3RhdHVzKTtcbn1cblxuZnVuY3Rpb24gcmVmbGVjdChwcm9taXNlKXtcbiAgcmV0dXJuIHByb21pc2UudGhlbihmdW5jdGlvbihyZXNvbHZlZCl7IHJldHVybiB7cmVzb2x2ZWQ6cmVzb2x2ZWQsIHN0YXR1czogXCJyZXNvbHZlZFwiIH07fSxcbiAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihyZWplY3RlZCl7IHJldHVybiB7cmVqZWN0ZWQ6cmVqZWN0ZWQsIHN0YXR1czogXCJyZWplY3RlZFwiIH07fSk7XG59XG5cbnZhciBwZW9wbGVEYXRhTG9jYWwgPSBbXTtcbnZhciBwbGFuZXREYXRhTG9jYWwgPSBbXTtcbiIsImZ1bmN0aW9uIGdldFBsYW5ldERhdGEoKXtcbiAgdmFyIHBsYW5ldE5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucGVvcGxlLWxpc3RfX3BsYW5ldCcpO1xuICB2YXIgcGxhbmV0VVJMID0gJ2h0dHBzOi8vc3dhcGkuY28vYXBpL3BsYW5ldHMvJztcbiAgdmFyIHByb21pc2VzID0gW107XG5cbiAgcmVxdWVzdFNXSW5mbyhwbGFuZXRVUkwsIFwiR0VUXCIpLnRoZW4oX3N0YXJ0TGlzdCwgZXJyb3JIYW5kbGVyKTtcblxuICBmdW5jdGlvbiBfc3RhcnRMaXN0KGRhdGEpIHtcbiAgICB2YXIgcGxhbmV0TnVtYmVyID0gZGF0YS5jb3VudDtcbiAgICBfcG9wdWxhdGVMaXN0KHBsYW5ldE51bWJlcik7XG4gIH1cblxuICBmdW5jdGlvbiBfcG9wdWxhdGVMaXN0KHBsYW5ldE51bWJlcikge1xuICAgIGZvciAodmFyIGkgPSAxOyBpIDw9IHBsYW5ldE51bWJlcjsgaSsrKSB7XG4gICAgICBjdXJyZW50UGxhbmV0VVJMID0gcGxhbmV0VVJMICsgaTtcbiAgICAgIHByb21pc2VzLnB1c2gocmVxdWVzdFNXSW5mbyhjdXJyZW50UGxhbmV0VVJMLCBcIkdFVFwiKSk7XG4gICAgfVxuICAgIFByb21pc2UuYWxsKHByb21pc2VzLm1hcChyZWZsZWN0KSkudGhlbihmdW5jdGlvbihwbGFuZXRzRGF0YSl7XG4gICAgICBfc3RvcmVQbGFuZXREYXRhKHBsYW5ldHNEYXRhKTtcbiAgICAgIF9yZW5kZXJQbGFuZXRJdGVtKCk7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBfc3RvcmVQbGFuZXREYXRhKHBsYW5ldHNEYXRhKSB7XG4gICAgdmFyIGlkID0gMTtcbiAgICBwbGFuZXRzRGF0YS5mb3JFYWNoKGZ1bmN0aW9uKHBsYW5ldERhdGEpIHtcbiAgICAgIGlmIChwbGFuZXREYXRhLnJlc29sdmVkKSB7XG4gICAgICAgIHZhciBuZXdQbGFuZXQgPSB7XG4gICAgICAgICAgaWQ6IGlkLFxuICAgICAgICAgIG5hbWU6IHBsYW5ldERhdGEucmVzb2x2ZWQubmFtZSxcbiAgICAgICAgICB0ZXJyYWluOiBwbGFuZXREYXRhLnJlc29sdmVkLnRlcnJhaW4sXG4gICAgICAgICAgcG9wdWxhdGlvbjogcGxhbmV0RGF0YS5yZXNvbHZlZC5wb3B1bGF0aW9uLFxuICAgICAgICAgIGRpYW1ldGVyOiBwbGFuZXREYXRhLnJlc29sdmVkLmRpYW1ldGVyXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKHBsYW5ldERhdGEucmVzb2x2ZWQucmVzaWRlbnRzLmxlbmd0aCkge1xuICAgICAgICAgIG5ld1BsYW5ldC5yZXNpZGVudHMgPSBwbGFuZXREYXRhLnJlc29sdmVkLnJlc2lkZW50cy5tYXAoZnVuY3Rpb24ocmVzaWRlbnRVUkwpIHtcbiAgICAgICAgICAgIHJldHVybiByZXNpZGVudFVSTC5yZXBsYWNlKC9bXjAtOV0vZywnJyk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmV3UGxhbmV0LnJlc2lkZW50cyA9IFwidW5rbm93blwiO1xuICAgICAgICB9XG4gICAgICAgIHBsYW5ldERhdGFMb2NhbC5wdXNoKG5ld1BsYW5ldCk7XG4gICAgICB9XG4gICAgICBpZCsrO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gX3JlbmRlclBsYW5ldEl0ZW0oKSB7XG4gICAgcGVvcGxlRGF0YUxvY2FsLmZvckVhY2goIGZ1bmN0aW9uKHBlcnNvbiwgaW5kZXgpIHtcbiAgICAgIHBsYW5ldE5hbWVbaW5kZXhdLmlubmVySFRNTCA9IF9nZXRQZXJzb25QbGFuZXROYW1lKHBlcnNvbi5wbGFuZXQpO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gX2dldFBlcnNvblBsYW5ldE5hbWUocGxhbmV0SWQpIHtcbiAgICB2YXIgbXlQbGFuZXQgPSAnJztcbiAgICBwbGFuZXREYXRhTG9jYWwuZm9yRWFjaChmdW5jdGlvbihwbGFuZXQpIHtcbiAgICAgIGlmIChwbGFuZXQuaWQgPT09IHBhcnNlSW50KHBsYW5ldElkKSkge1xuICAgICAgICBteVBsYW5ldCA9IHBsYW5ldC5uYW1lO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBteVBsYW5ldDtcbiAgfVxufVxuIiwidmFyIHJlbmRlckxpc3QgPSAoZnVuY3Rpb24oKSB7XG4gIHZhciBwZW9wbGVHcmlkICAgID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Blb3BsZS1ncmlkJyk7XG4gIHZhciBwZW9wbGVMaSAgICAgID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBlb3BsZS1saXN0X19pdGVtJyk7XG4gIHZhciBwZW9wbGVOYW1lO1xuXG4gIHZhciBwZW9wbGVVUkwgPSAnaHR0cHM6Ly9zd2FwaS5jby9hcGkvcGVvcGxlLyc7XG4gIHZhciBwcm9taXNlcyA9IFtdO1xuXG4gIHJlcXVlc3RTV0luZm8ocGVvcGxlVVJMLCBcIkdFVFwiKS50aGVuKF9zdGFydExpc3QsIGVycm9ySGFuZGxlcik7XG5cbiAgZnVuY3Rpb24gX3N0YXJ0TGlzdChkYXRhKSB7XG4gICAgdmFyIHBlb3BsZU51bWJlciA9IGRhdGEuY291bnQ7XG4gICAgX2J1aWxkTGlzdChwZW9wbGVOdW1iZXIpO1xuICAgIF9wb3B1bGF0ZUxpc3QocGVvcGxlTnVtYmVyKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9idWlsZExpc3QocGVvcGxlTnVtYmVyKSB7XG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCBwZW9wbGVOdW1iZXI7IGkrPTIpIHtcbiAgICAgIHZhciBwZW9wbGVMaUNsb25lID0gcGVvcGxlTGkuY2xvbmVOb2RlKHRydWUpO1xuICAgICAgcGVvcGxlR3JpZC5hcHBlbmRDaGlsZChwZW9wbGVMaUNsb25lKTtcbiAgICB9XG4gICAgcGVvcGxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wZW9wbGUtbGlzdF9fbmFtZScpO1xuICB9XG5cbiAgZnVuY3Rpb24gX3BvcHVsYXRlTGlzdChwZW9wbGVOdW1iZXIpIHtcbiAgICBmb3IgKHZhciBpID0gMTsgaSA8PSBwZW9wbGVOdW1iZXI7IGkrKykge1xuICAgICAgY3VycmVudFBlcnNvblVSTCA9IHBlb3BsZVVSTCArIGk7XG4gICAgICBwcm9taXNlcy5wdXNoKHJlcXVlc3RTV0luZm8oY3VycmVudFBlcnNvblVSTCwgXCJHRVRcIikpO1xuICAgIH1cbiAgICBQcm9taXNlLmFsbChwcm9taXNlcy5tYXAocmVmbGVjdCkpLnRoZW4oZnVuY3Rpb24ocGVvcGxlRGF0YSl7XG4gICAgICBfc3RvcmVQZW9wbGVEYXRhKHBlb3BsZURhdGEpO1xuICAgICAgX3JlbmRlclBlcnNvbkl0ZW0oKTtcbiAgICAgIGdldFBsYW5ldERhdGEoKTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9zdG9yZVBlb3BsZURhdGEocGVvcGxlRGF0YSkge1xuICAgIHZhciBpZCA9IDE7XG4gICAgcGVvcGxlRGF0YS5mb3JFYWNoKGZ1bmN0aW9uKHBlcnNvbkRhdGEpIHtcbiAgICAgIGlmIChwZXJzb25EYXRhLnJlc29sdmVkKSB7XG4gICAgICAgIHZhciBuZXdQZXJzb24gPSB7XG4gICAgICAgICAgaWQ6IGlkLFxuICAgICAgICAgIG5hbWU6IHBlcnNvbkRhdGEucmVzb2x2ZWQubmFtZSxcbiAgICAgICAgICBoZWlnaHQ6IHBlcnNvbkRhdGEucmVzb2x2ZWQuaGVpZ2h0LFxuICAgICAgICAgIHdlaWdodDogcGVyc29uRGF0YS5yZXNvbHZlZC5tYXNzLFxuICAgICAgICAgIGJpcnRoX3llYXI6IHBlcnNvbkRhdGEucmVzb2x2ZWQuYmlydGhfeWVhcixcbiAgICAgICAgICBnZW5kZXI6IHBlcnNvbkRhdGEucmVzb2x2ZWQuZ2VuZGVyXG4gICAgICAgIH07XG4gICAgICAgIHBlcnNvbkRhdGEucmVzb2x2ZWQuaG9tZXdvcmxkID9cbiAgICAgICAgbmV3UGVyc29uLnBsYW5ldCA9IHBlcnNvbkRhdGEucmVzb2x2ZWQuaG9tZXdvcmxkLnJlcGxhY2UoL1teMC05XS9nLCcnKSA6XG4gICAgICAgIG5ld1BlcnNvbi5wbGFuZXQgPSBcInVua25vd25cIjtcblxuICAgICAgICBwZXJzb25EYXRhLnJlc29sdmVkLnNwZWNpZXNbMF0gP1xuICAgICAgICBuZXdQZXJzb24uc3BlY2llcyA9IHBlcnNvbkRhdGEucmVzb2x2ZWQuc3BlY2llc1swXS5yZXBsYWNlKC9bXjAtOV0vZywnJykgOlxuICAgICAgICBuZXdQZXJzb24uc3BlY2llcyA9IFwidW5rbm93blwiO1xuXG4gICAgICAgIHBlb3BsZURhdGFMb2NhbC5wdXNoKG5ld1BlcnNvbik7XG4gICAgICB9XG4gICAgICBpZCsrO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gX3JlbmRlclBlcnNvbkl0ZW0oKSB7XG4gICAgcGVvcGxlRGF0YUxvY2FsLmZvckVhY2goIGZ1bmN0aW9uKHBlcnNvbiwgaW5kZXgpIHtcbiAgICAgIHBlb3BsZU5hbWVbaW5kZXhdLmlubmVySFRNTCA9IHBlcnNvbi5uYW1lO1xuICAgIH0pO1xuICB9XG59KSgpO1xuIl19
